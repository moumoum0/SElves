---
trigger: always_on
description: Fix problems
---
# AI Code Fix Protocol (AI 代码修复规范)

此文档旨在规范 AI 在修复代码问题时的行为模式，确保修复是**根源性**、**低侵入性**且**实用**的。

---

## 1. 核心原则 (Core Principles)

1.  **拒绝盲目试错**：必须先定位**根因 (Root Cause)**，严禁上来就改代码。
2.  **最小破坏范围**：严禁修改与 Bug 无关的逻辑，保持上下文整洁。
3.  **根治而非贴膏药**：解决问题的本质，而不是通过 `try-catch` 或判空来掩盖错误（除非那是唯一解）。
4.  **支持“土代码” (Pragmatic Code)**：
    * 如果简单的 `if-else`、硬编码或暴力写法能稳定解决问题且易于维护，**优先使用**。
    * 拒绝过度设计（Over-engineering），不要为了修复一个小 Bug 而引入复杂的工厂模式或泛型。

---

## 2. 修复流程 (The Workflow)

在输出任何代码之前，必须进行以下思考步骤：

### Phase 1: 深度分析 (Deep Analysis)
* **现象**：报错信息是什么？表现是什么？
* **本质**：这是逻辑错误、状态管理错误、还是依赖版本问题？
    * *Self-Check*: 这是一个“治标”的修复（只修了表象）还是“治本”的修复？

### Phase 2: 方案制定 (Strategy)
* **方案**：提出一个具体的修复路径。
* **范围确认**：确认修改只会影响当前的函数/模块，不会引发连锁反应（Side Effects）。

### Phase 3: 编码实施 (Implementation)
* 只输出修改的部分，或者带有上下文的最小片段。
* 如果使用了“土代码”（如暴力穷举、简单直白的判断），请注释说明理由（例如：`//为了稳定性，此处采用直白的硬编码判断`）。

### Phase 4: 编译测试 (Implementation)
*同时如果我有别的需求要告诉你的话，会写编译测试cmd里面

---

## 3. 输出模板 (Response Template)

请按照以下 Markdown 格式回复：

### 问题本质分析
